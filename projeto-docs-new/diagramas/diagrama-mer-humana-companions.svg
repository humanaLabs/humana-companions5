<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .entity-box {
        fill: #f8f9fa;
        stroke: #2c3e50;
        stroke-width: 2;
        rx: 8;
      }
      .entity-title {
        fill: #2c3e50;
        font-family: 'Arial', sans-serif;
        font-size: 14px;
        font-weight: bold;
        text-anchor: middle;
      }
      .attribute-text {
        fill: #34495e;
        font-family: 'Arial', sans-serif;
        font-size: 11px;
        text-anchor: middle;
      }
      .pk-text {
        fill: #e74c3c;
        font-weight: bold;
      }
      .fk-text {
        fill: #3498db;
        font-weight: bold;
      }
      .relationship-line {
        stroke: #2c3e50;
        stroke-width: 2;
        fill: none;
        marker-end: url(#arrowhead);
      }
      .relationship-dotted {
        stroke: #2c3e50;
        stroke-width: 2;
        stroke-dasharray: 5,5;
        fill: none;
        marker-end: url(#arrowhead);
      }
      .relationship-label {
        fill: #2c3e50;
        font-family: 'Arial', sans-serif;
        font-size: 10px;
        font-weight: bold;
        text-anchor: middle;
      }
      .junction-box {
        fill: #e8f4fd;
        stroke: #3498db;
        stroke-width: 2;
        rx: 6;
      }
      .enum-box {
        fill: #fff3cd;
        stroke: #856404;
        stroke-width: 1;
        rx: 4;
      }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2c3e50" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="800" fill="#ffffff"/>

  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-family="Arial" font-size="20" font-weight="bold" fill="#2c3e50">
    HUMANA COMPANIONS - Modelo Entidade-Relacionamento (MER)
  </text>

  <!-- ORGS Entity -->
  <rect x="50" y="60" width="120" height="80" class="entity-box"/>
  <text x="110" y="80" class="entity-title">ORGS</text>
  <text x="110" y="95" class="attribute-text pk-text">id (PK)</text>
  <text x="110" y="110" class="attribute-text">name</text>
  <text x="110" y="125" class="attribute-text">created_at</text>

  <!-- WORKSPACES Entity -->
  <rect x="250" y="60" width="120" height="100" class="entity-box"/>
  <text x="310" y="80" class="entity-title">WORKSPACES</text>
  <text x="310" y="95" class="attribute-text pk-text">id (PK)</text>
  <text x="310" y="110" class="attribute-text fk-text">org_id (FK)</text>
  <text x="310" y="125" class="attribute-text">name</text>
  <text x="310" y="140" class="attribute-text">description</text>
  <text x="310" y="155" class="attribute-text">created_at</text>

  <!-- WORKSPACEUSER Junction Table -->
  <rect x="450" y="100" width="120" height="80" class="junction-box"/>
  <text x="510" y="120" class="entity-title">WORKSPACEUSER</text>
  <text x="510" y="135" class="attribute-text pk-text">id (PK)</text>
  <text x="510" y="150" class="attribute-text fk-text">workspace_id (FK)</text>
  <text x="510" y="165" class="attribute-text fk-text">user_id (FK)</text>

  <!-- USERS Entity -->
  <rect x="650" y="60" width="120" height="100" class="entity-box"/>
  <text x="710" y="80" class="entity-title">USERS</text>
  <text x="710" y="95" class="attribute-text pk-text">id (PK)</text>
  <text x="710" y="110" class="attribute-text">email</text>
  <text x="710" y="125" class="attribute-text">name</text>
  <text x="710" y="140" class="attribute-text">role</text>
  <text x="710" y="155" class="attribute-text">created_at</text>

  <!-- CHATS Entity -->
  <rect x="850" y="60" width="120" height="100" class="entity-box"/>
  <text x="910" y="80" class="entity-title">CHATS</text>
  <text x="910" y="95" class="attribute-text pk-text">id (PK)</text>
  <text x="910" y="110" class="attribute-text fk-text">user_id (FK)</text>
  <text x="910" y="125" class="attribute-text fk-text">workspace_id (FK)</text>
  <text x="910" y="140" class="attribute-text">title</text>
  <text x="910" y="155" class="attribute-text">created_at</text>

  <!-- ARTIFACTS Entity -->
  <rect x="1050" y="60" width="120" height="100" class="entity-box"/>
  <text x="1110" y="80" class="entity-title">ARTIFACTS</text>
  <text x="1110" y="95" class="attribute-text pk-text">id (PK)</text>
  <text x="1110" y="110" class="attribute-text fk-text">chat_id (FK)</text>
  <text x="1110" y="125" class="attribute-text">type</text>
  <text x="1110" y="140" class="attribute-text">content</text>
  <text x="1110" y="155" class="attribute-text">created_at</text>

  <!-- CAMPS Entity -->
  <rect x="50" y="200" width="120" height="100" class="entity-box"/>
  <text x="110" y="220" class="entity-title">CAMPS</text>
  <text x="110" y="235" class="attribute-text pk-text">id (PK)</text>
  <text x="110" y="250" class="attribute-text fk-text">org_id (FK)</text>
  <text x="110" y="265" class="attribute-text">name</text>
  <text x="110" y="280" class="attribute-text">description</text>
  <text x="110" y="295" class="attribute-text">created_at</text>

  <!-- SKILLS Entity -->
  <rect x="50" y="350" width="120" height="100" class="entity-box"/>
  <text x="110" y="370" class="entity-title">SKILLS</text>
  <text x="110" y="385" class="attribute-text pk-text">id (PK)</text>
  <text x="110" y="400" class="attribute-text fk-text">camp_id (FK)</text>
  <text x="110" y="415" class="attribute-text">name</text>
  <text x="110" y="430" class="attribute-text">description</text>
  <text x="110" y="445" class="attribute-text">created_at</text>

  <!-- PROCESS_STEPS Entity -->
  <rect x="50" y="500" width="120" height="100" class="entity-box"/>
  <text x="110" y="520" class="entity-title">PROCESS_STEPS</text>
  <text x="110" y="535" class="attribute-text pk-text">id (PK)</text>
  <text x="110" y="550" class="attribute-text fk-text">skill_id (FK)</text>
  <text x="110" y="565" class="attribute-text">name</text>
  <text x="110" y="580" class="attribute-text">order</text>
  <text x="110" y="595" class="attribute-text">created_at</text>

  <!-- KNOWLEDGE_RAG Entity -->
  <rect x="250" y="200" width="120" height="100" class="entity-box"/>
  <text x="310" y="220" class="entity-title">KNOWLEDGE_RAG</text>
  <text x="310" y="235" class="attribute-text pk-text">id (PK)</text>
  <text x="310" y="250" class="attribute-text fk-text">workspace_id (FK)</text>
  <text x="310" y="265" class="attribute-text">source</text>
  <text x="310" y="280" class="attribute-text">content</text>
  <text x="310" y="295" class="attribute-text">created_at</text>

  <!-- TOOLS_MCP Entity -->
  <rect x="250" y="350" width="120" height="100" class="entity-box"/>
  <text x="310" y="370" class="entity-title">TOOLS_MCP</text>
  <text x="310" y="385" class="attribute-text pk-text">id (PK)</text>
  <text x="310" y="400" class="attribute-text fk-text">workspace_id (FK)</text>
  <text x="310" y="415" class="attribute-text">name</text>
  <text x="310" y="430" class="attribute-text">type</text>
  <text x="310" y="445" class="attribute-text">config</text>

  <!-- PERM_ACL Entity -->
  <rect x="450" y="200" width="120" height="120" class="entity-box"/>
  <text x="510" y="220" class="entity-title">PERM_ACL</text>
  <text x="510" y="235" class="attribute-text pk-text">id (PK)</text>
  <text x="510" y="250" class="attribute-text fk-text">user_id (FK)</text>
  <text x="510" y="265" class="attribute-text fk-text">resource_id (FK)</text>
  <text x="510" y="280" class="attribute-text">resource_type</text>
  <text x="510" y="295" class="attribute-text">action</text>
  <text x="510" y="310" class="attribute-text">permission</text>

  <!-- ENUMS Section -->
  <rect x="650" y="200" width="200" height="200" class="enum-box"/>
  <text x="750" y="220" class="entity-title">ENUMS</text>
  <text x="750" y="240" class="attribute-text">ROLES</text>
  <text x="750" y="255" class="attribute-text">RESOURCES</text>
  <text x="750" y="270" class="attribute-text">ACTIONS</text>
  <text x="750" y="285" class="attribute-text">CLASS</text>
  <text x="750" y="300" class="attribute-text">RESTRICTS</text>

  <!-- Relationships -->
  
  <!-- ORGS to WORKSPACES (1:N) -->
  <line x1="170" y1="100" x2="250" y2="100" class="relationship-line"/>
  <text x="210" y="95" class="relationship-label">1:N</text>

  <!-- ORGS to CAMPS (1:N) -->
  <line x1="110" y1="140" x2="110" y2="200" class="relationship-line"/>
  <text x="120" y="170" class="relationship-label">1:N</text>

  <!-- WORKSPACES to WORKSPACEUSER (1:N) -->
  <line x1="370" y1="110" x2="450" y2="140" class="relationship-line"/>
  <text x="410" y="125" class="relationship-label">1:N</text>

  <!-- USERS to WORKSPACEUSER (1:N) -->
  <line x1="650" y1="110" x2="570" y2="140" class="relationship-line"/>
  <text x="610" y="125" class="relationship-label">1:N</text>

  <!-- USERS to CHATS (1:N) -->
  <line x1="770" y1="110" x2="850" y2="110" class="relationship-line"/>
  <text x="810" y="105" class="relationship-label">1:N</text>

  <!-- WORKSPACES to CHATS (1:N) -->
  <line x1="310" y1="160" x2="910" y2="160" class="relationship-line"/>
  <text x="610" y="155" class="relationship-label">1:N</text>

  <!-- CHATS to ARTIFACTS (1:N) -->
  <line x1="970" y1="110" x2="1050" y2="110" class="relationship-line"/>
  <text x="1010" y="105" class="relationship-label">1:N</text>

  <!-- CAMPS to SKILLS (1:N) -->
  <line x1="110" y1="300" x2="110" y2="350" class="relationship-line"/>
  <text x="120" y="325" class="relationship-label">1:N</text>

  <!-- SKILLS to PROCESS_STEPS (1:N) -->
  <line x1="110" y1="450" x2="110" y2="500" class="relationship-line"/>
  <text x="120" y="475" class="relationship-label">1:N</text>

  <!-- WORKSPACES to KNOWLEDGE_RAG (1:N) -->
  <line x1="310" y1="160" x2="310" y2="200" class="relationship-line"/>
  <text x="320" y="180" class="relationship-label">1:N</text>

  <!-- WORKSPACES to TOOLS_MCP (1:N) -->
  <line x1="310" y1="160" x2="310" y2="350" class="relationship-line"/>
  <text x="320" y="255" class="relationship-label">1:N</text>

  <!-- KNOWLEDGE_RAG to PROCESS_STEPS (N:M) -->
  <line x1="250" y1="250" x2="110" y2="550" class="relationship-dotted"/>
  <text x="180" y="400" class="relationship-label">N:M</text>

  <!-- TOOLS_MCP to PROCESS_STEPS (N:M) -->
  <line x1="250" y1="400" x2="110" y2="550" class="relationship-dotted"/>
  <text x="180" y="475" class="relationship-label">N:M</text>

  <!-- USERS to PERM_ACL (1:N) -->
  <line x1="710" y1="160" x2="510" y2="260" class="relationship-line"/>
  <text x="610" y="210" class="relationship-label">1:N</text>

  <!-- Context Injection Label -->
  <text x="310" y="320" class="relationship-label" fill="#e74c3c">Context Injection</text>

  <!-- Object Steps Stream Label -->
  <text x="110" y="620" class="relationship-label" fill="#e74c3c">OBJECT_STEPS_STREAM</text>

  <!-- Legend -->
  <rect x="50" y="650" width="300" height="120" fill="#f8f9fa" stroke="#2c3e50" stroke-width="1" rx="5"/>
  <text x="200" y="670" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="#2c3e50">Legenda</text>
  <text x="70" y="690" font-family="Arial" font-size="10" fill="#2c3e50">PK = Primary Key</text>
  <text x="70" y="705" font-family="Arial" font-size="10" fill="#2c3e50">FK = Foreign Key</text>
  <text x="70" y="720" font-family="Arial" font-size="10" fill="#2c3e50">1:N = One-to-Many</text>
  <text x="70" y="735" font-family="Arial" font-size="10" fill="#2c3e50">N:M = Many-to-Many</text>
  <text x="70" y="750" font-family="Arial" font-size="10" fill="#2c3e50">Junction Table = Tabela de Junção</text>
  <text x="70" y="765" font-family="Arial" font-size="10" fill="#2c3e50">ENUMS = Tipos Enumerados</text>

</svg>
