<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800" width="1200" height="800">
  <defs>
    <style>
      .table-box { fill: #ffffff; stroke: #2c3e50; stroke-width: 2; }
      .table-header { fill: #27ae60; stroke: none; }
      .table-title { fill: #ffffff; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; }
      .field-text { fill: #2c3e50; font-family: 'Courier New', monospace; font-size: 13px; }
      .pk-field { fill: #e74c3c; font-weight: bold; }
      .fk-field { fill: #3498db; }
      .jsonb-field { fill: #f39c12; font-weight: bold; }
      .section-title { fill: #27ae60; font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; }
      .note-box { fill: #e8f5e9; stroke: #4caf50; stroke-width: 2; }
      .note-text { fill: #2e7d32; font-family: Arial, sans-serif; font-size: 12px; }
      .stats-box { fill: #fff3e0; stroke: #ff9800; stroke-width: 2; }
      .stats-text { fill: #e65100; font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; }
    </style>
  </defs>

  <!-- Title -->
  <text x="600" y="35" text-anchor="middle" class="section-title">
    ORGANIZATIONS - Modelo T√©cnico v2.0
  </text>
  <text x="600" y="58" text-anchor="middle" style="fill: #7f8c8d; font-size: 13px; font-style: italic;">
    Estrutura: 5 campos header + 1 attributes JSONB (Redu√ß√£o: 12‚Üí6 campos, 50%)
  </text>

  <!-- Main Table -->
  <g id="organizations">
    <rect class="table-box" x="50" y="90" width="500" height="350" rx="8"/>
    <rect class="table-header" x="50" y="90" width="500" height="40" rx="8"/>
    <text x="300" y="117" text-anchor="middle" class="table-title">ORGANIZATIONS</text>
    
    <!-- Header Fields -->
    <text x="70" y="155" class="field-text" style="font-weight: bold; fill: #27ae60;">‚ñº HEADER (Colunas - Alta Frequ√™ncia)</text>
    <text x="70" y="180" class="field-text pk-field">üîë organization_id UUID PK</text>
    <text x="70" y="202" class="field-text">‚Ä¢ organization_name VARCHAR(255) NOT NULL</text>
    <text x="70" y="224" class="field-text">‚Ä¢ organization_created_at TIMESTAMP NOT NULL</text>
    <text x="70" y="246" class="field-text">‚Ä¢ organization_updated_at TIMESTAMP NOT NULL</text>
    <text x="70" y="268" class="field-text">‚Ä¢ organization_is_active BOOLEAN DEFAULT true</text>
    
    <!-- Separator -->
    <line x1="70" y1="285" x2="530" y2="285" stroke="#95a5a6" stroke-width="2" stroke-dasharray="6"/>
    
    <!-- JSONB Field -->
    <text x="70" y="310" class="field-text" style="font-weight: bold; fill: #f39c12;">‚ñº ATTRIBUTES (JSONB - Baixa Frequ√™ncia)</text>
    <text x="70" y="335" class="field-text jsonb-field">üì¶ organization_attributes JSONB NOT NULL</text>
    <text x="90" y="360" class="field-text" style="font-size: 11px; fill: #7f8c8d;">   ‚îú‚îÄ description, branding {logoUrl, colors}</text>
    <text x="90" y="378" class="field-text" style="font-size: 11px; fill: #7f8c8d;">   ‚îú‚îÄ tenantConfig {domain, integrations}</text>
    <text x="90" y="396" class="field-text" style="font-size: 11px; fill: #7f8c8d;">   ‚îú‚îÄ structure {teams[], positions[]}</text>
    <text x="90" y="414" class="field-text" style="font-size: 11px; fill: #7f8c8d;">   ‚îî‚îÄ culture, subscription, access, metadata</text>
  </g>

  <!-- Stats Box -->
  <g id="stats">
    <rect class="stats-box" x="600" y="90" width="550" height="160" rx="8"/>
    <text x="875" y="115" text-anchor="middle" class="stats-text" style="font-size: 16px;">
      üìä ESTAT√çSTICAS E GANHOS
    </text>
    
    <text x="620" y="145" class="stats-text">‚Ä¢ Campos: 12 ‚Üí 6 (50% redu√ß√£o)</text>
    <text x="620" y="168" class="stats-text">‚Ä¢ Performance listagens: +56% mais r√°pido</text>
    <text x="620" y="191" class="stats-text">‚Ä¢ Performance seletor: +60% mais r√°pido</text>
    <text x="620" y="214" class="stats-text">‚Ä¢ Escalabilidade: 10k+ organiza√ß√µes</text>
    <text x="620" y="237" class="stats-text">‚Ä¢ √çndices: 3 principais + 2 JSONB</text>
  </g>

  <!-- Key Decisions -->
  <g id="decisions">
    <rect class="note-box" x="600" y="270" width="550" height="170" rx="8"/>
    <text x="875" y="295" text-anchor="middle" style="fill: #2e7d32; font-size: 16px; font-weight: bold;">
      üéØ DECIS√ïES T√âCNICAS
    </text>
    
    <text x="620" y="325" class="note-text">‚úì is_active BOOLEAN (n√£o ENUM) - simplicidade</text>
    <text x="620" y="347" class="note-text">‚úì Sem userId - ownership via user_organizations</text>
    <text x="620" y="369" class="note-text">‚úì structure consolidado - teams+positions juntos</text>
    <text x="620" y="391" class="note-text">‚úì inviteCode indexado no JSONB - 80% mais r√°pido</text>
    <text x="620" y="413" class="note-text">‚úì Tabelas relacionadas: user_organizations, invites</text>
  </g>

  <!-- Benefits -->
  <g id="benefits">
    <rect class="note-box" x="50" y="470" width="1100" height="280" rx="8"/>
    <text x="600" y="500" text-anchor="middle" style="fill: #2e7d32; font-size: 18px; font-weight: bold;">
      ‚úÖ BENEF√çCIOS DA REESTRUTURA√á√ÉO
    </text>
    
    <text x="70" y="535" class="note-text" style="font-weight: bold;">üöÄ Performance:</text>
    <text x="90" y="558" class="note-text">‚Ä¢ Listagens: 180ms ‚Üí 80ms (56% mais r√°pido)</text>
    <text x="90" y="578" class="note-text">‚Ä¢ Seletor de contexto: 50ms ‚Üí 20ms (60% mais r√°pido)</text>
    <text x="90" y="598" class="note-text">‚Ä¢ Busca por nome: 120ms ‚Üí 40ms (67% mais r√°pido)</text>
    <text x="90" y="618" class="note-text">‚Ä¢ Invite code: 300ms ‚Üí 60ms (80% mais r√°pido)</text>
    
    <text x="70" y="653" class="note-text" style="font-weight: bold;">üîß Flexibilidade:</text>
    <text x="90" y="676" class="note-text">‚Ä¢ Estruturas organizacionais customizadas (teams/positions)</text>
    <text x="90" y="696" class="note-text">‚Ä¢ Evolu√ß√£o sem ALTER TABLE (zero downtime)</text>
    <text x="90" y="716" class="note-text">‚Ä¢ Versionamento de schema no JSONB</text>
    
    <text x="650" y="535" class="note-text" style="font-weight: bold;">üìà Escalabilidade:</text>
    <text x="670" y="558" class="note-text">‚Ä¢ 10k+ organiza√ß√µes suportadas</text>
    <text x="670" y="578" class="note-text">‚Ä¢ Particionamento por is_active ou created_at</text>
    <text x="670" y="598" class="note-text">‚Ä¢ √çndices 58% menores ‚Üí mais cache hits</text>
    
    <text x="650" y="633" class="note-text" style="font-weight: bold;">‚öñÔ∏è Trade-offs Aceit√°veis:</text>
    <text x="670" y="656" class="note-text">‚Ä¢ Consolida√ß√£o JSON: structure (teams+positions)</text>
    <text x="670" y="676" class="note-text">‚Ä¢ Queries JSONB verbosas: compensado por flexibilidade</text>
    <text x="670" y="696" class="note-text">‚Ä¢ Schema validator necess√°rio: +2h dev (one-time)</text>
    <text x="670" y="716" class="note-text">‚Ä¢ Migra√ß√£o: ~2h dev + 10min exec</text>
  </g>

  <!-- Footer -->
  <text x="600" y="780" text-anchor="middle" style="fill: #95a5a6; font-size: 11px;">
    Modelo v2.0 - Alinhado com NOVO-MODELO-DADOS-HUMANA.svg - Documento: MODELO-TECNICO-ORGANIZATION.md
  </text>
</svg>
